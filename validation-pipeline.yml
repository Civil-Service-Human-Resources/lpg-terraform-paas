trigger:
- idt-feature-*

pool:
  vmImage: ubuntu-latest
  
steps:
  - task: AzureCLI@2
    inputs:
      azureSubscription: 'CSL Staging'
      scriptType: 'bash'
      scriptLocation: 'inlineScript'
      inlineScript: |
        az --version
        az account show

  - task: TerraformInstaller@0
    displayName: Install Terraform
    inputs:
      terraformVersion: 0.13.0
  
  - task: AzureCLI@2
    inputs:
      azureSubscription: 'CSL Staging'
      scriptType: 'bash'
      scriptLocation: 'inlineScript'
      inlineScript: |
        ./scripts/ci/validate_envs.sh
