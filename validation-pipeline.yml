trigger:
- idt-feature-*

pool:
  vmImage: ubuntu-latest
  
steps:
  - task: TerraformInstaller@0
    displayName: Install Terraform
    inputs:
      terraformVersion: 0.13.0
  
  - task: AzureCLI@2
    displayName: "Log in to Azure CLI"
    inputs:
      azureSubscription: $(SUBSCRIPTION_ID)
      scriptType: bash
      addSpnToEnvironment: true
      scriptLocation: inlineScript
      inlineScript: |
        export ARM_CLIENT_ID=$SERVICEPRINCIPAL_CLIENT_ID
        export ARM_CLIENT_SECRET=$SERVICEPRINCIPAL_CLIENT_SECRET
        export ARM_TENANT_ID=$SERVICEPRINCIPAL_TENANT_ID
  